function publicationRate(n,t){let i=200;t==="RateUp"&&$(n).addClass("active").attr("onclick","publicationRate(this, 'RemoveUp')").parent().find('button[name="PublicationRateDown"]').attr("onclick","publicationRate(this, 'DownFromUp')").parent().find("p").ratingTallyAnimation("hide","RateUp",i);t==="RemoveUp"&&$(n).removeClass("active").attr("onclick","publicationRate(this, 'RateUp')").parent().find('button[name="PublicationRateDown"]').attr("onclick","publicationRate(this, 'RateDown')").parent().find("p").ratingTallyAnimation("hide","RemoveUp",i);t==="UpFromDown"&&$(n).addClass("active").attr("onclick","publicationRate(this, 'RemoveUp')").parent().find('button[name="PublicationRateDown"]').removeClass("active").attr("onclick","publicationRate(this, 'DownFromUp')").parent().find("p").ratingTallyAnimation("hide","UpFromDown",i);t==="RateDown"&&$(n).addClass("active").attr("onclick","publicationRate(this, 'RemoveDown')").parent().find('button[name="PublicationRateUp"]').attr("onclick","publicationRate(this, 'UpFromDown')").parent().find("p").ratingTallyAnimation("hide","RateDown",i);t==="RemoveDown"&&$(n).removeClass("active").attr("onclick","publicationRate(this, 'RateDown')").parent().find('button[name="PublicationRateUp"]').attr("onclick","publicationRate(this, 'RateUp')").parent().find("p").ratingTallyAnimation("hide","RemoveDown",i);t==="DownFromUp"&&$(n).addClass("active").attr("onclick","publicationRate(this, 'RemoveDown')").parent().find('button[name="PublicationRateUp"]').removeClass("active").attr("onclick","publicationRate(this, 'UpFromDown')").parent().find("p").ratingTallyAnimation("hide","DownFromUp",i)}function publicationFavorite(n,t){t==="Set"&&($(n).attr("onclick","publicationFavorite(this, 'Remove')"),$(n).addClass("favorite"));t==="Remove"&&($(n).attr("onclick","publicationFavorite(this, 'Set')"),$(n).removeClass("favorite"))}function publicationHide(n,t){t==="Show"&&($(n).attr("onclick","publicationHide(this, 'Hide')"),$(n).attr("title","Скрыть пост (Для всех)"),$(n).removeClass("hide"),$(n).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/><\/svg>'));t==="Hide"&&($(n).attr("onclick","publicationHide(this, 'Show')"),$(n).attr("title","Раскрыть пост (Для всех)"),$(n).addClass("hide"),$(n).html('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/><\/svg>'))}function publicationLinkCopy(n,t){navigator.clipboard.writeText(Publication_link+t).then(function(){$(n).attr("title","Ссылка на пост скопирована!")});setTimeout(function(){$(n).attr("title","Скопировать ссылку на пост")},2e3)}function showSearchField(){Search_form.classList.remove("hidden")}function hideSearchField(){Search_form.classList.add("hidden");Search_form.getElementsByClassName("search-button")[0].removeAttribute("style","transition-delay: 0ms !important");Search_form.getElementsByClassName("search-input-field")[0].removeAttribute("style","transition-delay: 0ms !important")}function setSearchFormDelay(){return Search_form.getElementsByTagName("input")[0].value!==""?5e3:1e3}function switchTheme(){getThemeSetting("theme")===Dark_theme?changeThemeSettings(Light_theme,getThemeSetting("accent")):changeThemeSettings(Dark_theme,getThemeSetting("accent"))}function switchAccent(n){switch(n){case Green_accent:changeThemeSettings(getThemeSetting("theme"),Green_accent);break;case Yellow_accent:changeThemeSettings(getThemeSetting("theme"),Yellow_accent);break;case Sky_accent:changeThemeSettings(getThemeSetting("theme"),Sky_accent);break;case Pastel_accent:changeThemeSettings(getThemeSetting("theme"),Pastel_accent)}}function saveThemeSettings(n,t){this.localStorage.setItem(Onym_theme,JSON.stringify({theme:n,accent:t}))}function getThemeSetting(n){let t=JSON.parse(this.localStorage.getItem(Onym_theme));if(t===null&&defaultThemeSettings(this),JSON.parse(this.localStorage.getItem(Onym_theme))[n]===null)switch(n){case"theme":this.localStorage.setItem(Onym_theme,JSON.stringify({theme:Light_theme,accent:getThemeSetting("accent")}));break;case"accent":this.localStorage.setItem(Onym_theme,JSON.stringify({theme:getThemeSetting("theme"),accent:Green_accent}))}else return JSON.parse(this.localStorage.getItem(Onym_theme))[n]}function setThemeSettings(n,t){Html.setAttribute("accent-color",t);Html.setAttribute("theme-color",n)}function defaultThemeSettings(){changeThemeSettings(Light_theme,Green_accent)}function changeThemeSettings(n,t){setThemeSettings(n,t);saveThemeSettings(n,t)}function showThemeSwitcher(){Theme_switcher.classList.remove("hidden")}function hideThemeSwitcher(){Theme_switcher.classList.add("hidden")}function themeSwitcherLoad(){themeCheckbox.checked=getThemeSetting("theme")===Dark_theme}function accentSwitcherLoad(){switch(getThemeSetting("accent")){case Green_accent:Document.getElementById("change-accent-green").checked=!0;Document.getElementById("change-accent-yellow").checked=!1;Document.getElementById("change-accent-sky").checked=!1;Document.getElementById("change-accent-pastel").checked=!1;break;case Yellow_accent:Document.getElementById("change-accent-green").checked=!1;Document.getElementById("change-accent-yellow").checked=!0;Document.getElementById("change-accent-sky").checked=!1;Document.getElementById("change-accent-pastel").checked=!1;break;case Sky_accent:Document.getElementById("change-accent-green").checked=!1;Document.getElementById("change-accent-yellow").checked=!1;Document.getElementById("change-accent-sky").checked=!0;Document.getElementById("change-accent-pastel").checked=!1;break;case Pastel_accent:Document.getElementById("change-accent-green").checked=!1;Document.getElementById("change-accent-yellow").checked=!1;Document.getElementById("change-accent-sky").checked=!1;Document.getElementById("change-accent-pastel").checked=!0}}const Publication_link="https://localhost:5001/story/",Onym_theme="onym_theme",Light_theme="light",Dark_theme="dark",Green_accent="green",Yellow_accent="yellow",Sky_accent="sky",Pastel_accent="pastel",Document=this.document,Html=this.document.getElementsByTagName("html")[0],Search_form=this.document.getElementsByClassName("search")[0],Theme_switcher=this.document.getElementsByClassName("theme-switcher")[0],Accent_switchers=this.document.getElementsByClassName("popover-menu")[0];(function(n){n.fn.extend({ratingTallyAnimation:function(t,i,r){let u=this;return i==="RateUp"&&setTimeout(function(){u.removeClass(t).text(parseInt(u.text(),10)+1)},r),i==="RemoveUp"&&setTimeout(function(){u.removeClass(t).text(parseInt(u.text(),10)-1)},r),i==="UpFromDown"&&setTimeout(function(){u.removeClass(t).text(parseInt(u.text(),10)+2)},r),i==="RateDown"&&setTimeout(function(){u.removeClass(t).text(parseInt(u.text(),10)-1)},r),i==="RemoveDown"&&setTimeout(function(){u.removeClass(t).text(parseInt(u.text(),10)+1)},r),i==="DownFromUp"&&setTimeout(function(){u.removeClass(t).text(parseInt(u.text(),10)-2)},r),this.each(function(){n(this).addClass(t)})}})})(jQuery);$(function(){$(".lazy").Lazy({scrollDirection:"vertical",effect:"fadeIn",visibleOnly:!0,threshold:500,onError:function(n){console.log("error loading "+n.data("src"))}})});Search_form.addEventListener("mouseenter",()=>{showSearchField()});Search_form.addEventListener("mouseleave",()=>{let n=setTimeout(hideSearchField,setSearchFormDelay());Search_form.addEventListener("mouseenter",()=>{clearTimeout(n)});Search_form.addEventListener("input",()=>{clearTimeout(n),n=setTimeout(hideSearchField,setSearchFormDelay())})});let timerId,popoverButton=Theme_switcher.getElementsByClassName("popover-button")[0],popoverMenu=Theme_switcher.getElementsByClassName("popover-menu")[0],themeCheckbox=Theme_switcher.getElementsByClassName("theme-switcher-check")[0].getElementsByTagName("input")[0],accentCheckboxes=Accent_switchers,activeAccent;themeSwitcherLoad();accentSwitcherLoad();Document.onvisibilitychange=function(){themeSwitcherLoad();accentSwitcherLoad();setThemeSettings(getThemeSetting("theme"),getThemeSetting("accent"))};themeCheckbox.addEventListener("change",()=>{switchTheme()});popoverButton.addEventListener("mouseenter",()=>{clearTimeout(timerId),showThemeSwitcher()});popoverButton.addEventListener("mouseleave",()=>{timerId=setTimeout(hideThemeSwitcher,1e3)});popoverMenu.addEventListener("mouseenter",()=>{clearTimeout(timerId)});popoverMenu.addEventListener("mouseleave",()=>{clearTimeout(timerId),timerId=setTimeout(hideThemeSwitcher,1e3)});accentCheckboxes.addEventListener("mouseenter",()=>{Search_form.getElementsByClassName("search-button")[0].setAttribute("style","transition-delay: 0ms !important"),Search_form.getElementsByClassName("search-input-field")[0].setAttribute("style","transition-delay: 0ms !important")});accentCheckboxes.addEventListener("mouseleave",()=>{Search_form.getElementsByClassName("search-button")[0].removeAttribute("style","transition-delay: 0ms !important"),Search_form.getElementsByClassName("search-input-field")[0].removeAttribute("style","transition-delay: 0ms !important")});accentCheckboxes.getElementsByClassName(Green_accent)[0].addEventListener("mouseenter",()=>{this.activeAccent=getThemeSetting("accent"),switchAccent(Green_accent),Document.getElementById("change-accent-green").addEventListener("change",()=>{switchAccent(Green_accent),this.activeAccent=getThemeSetting("accent"),accentSwitcherLoad()}),accentCheckboxes.getElementsByClassName(Green_accent)[0].addEventListener("mouseleave",()=>{switchAccent(this.activeAccent)})});accentCheckboxes.getElementsByClassName(Yellow_accent)[0].addEventListener("mouseenter",()=>{this.activeAccent=getThemeSetting("accent"),switchAccent(Yellow_accent),Document.getElementById("change-accent-yellow").addEventListener("change",()=>{switchAccent(Yellow_accent),this.activeAccent=getThemeSetting("accent"),accentSwitcherLoad()}),accentCheckboxes.getElementsByClassName(Yellow_accent)[0].addEventListener("mouseleave",()=>{switchAccent(this.activeAccent)})});accentCheckboxes.getElementsByClassName(Sky_accent)[0].addEventListener("mouseenter",()=>{this.activeAccent=getThemeSetting("accent"),switchAccent(Sky_accent),Document.getElementById("change-accent-sky").addEventListener("change",()=>{switchAccent(Sky_accent),this.activeAccent=getThemeSetting("accent"),accentSwitcherLoad()}),accentCheckboxes.getElementsByClassName(Sky_accent)[0].addEventListener("mouseleave",()=>{switchAccent(this.activeAccent)})});accentCheckboxes.getElementsByClassName(Pastel_accent)[0].addEventListener("mouseenter",()=>{this.activeAccent=getThemeSetting("accent"),switchAccent(Pastel_accent),Document.getElementById("change-accent-pastel").addEventListener("change",()=>{switchAccent(Pastel_accent),this.activeAccent=getThemeSetting("accent"),accentSwitcherLoad()}),accentCheckboxes.getElementsByClassName(Pastel_accent)[0].addEventListener("mouseleave",()=>{switchAccent(this.activeAccent)})});